<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Poppins", sans-serif;
      }
    </style>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        background-color: #000;
        color: #fff;
      }

      .loading-spinner {
        border: 2px solid #333;
        border-top: 2px solid #1da1f2;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 20px auto;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }

        100% {
          transform: rotate(360deg);
        }
      }

      .error-message {
        background-color: #fee;
        color: #c53030;
        padding: 12px;
        border-radius: 8px;
        margin: 16px 0;
        border: 1px solid #feb2b2;
      }
    </style>
  </head>

  <body class="bg-black text-white min-h-screen">
    <!-- Main Content -->
    <main class="max-w-2xl mx-auto">
      <!-- Loading Spinner -->
      <div id="loading-spinner" class="text-center py-12" style="display: none">
        <div class="loading-spinner"></div>
        <div class="text-gray-400 mt-4">Loading profile...</div>
      </div>

      <!-- Error Message -->
      <div
        id="error-message"
        class="error-message mx-4"
        style="display: none"
      ></div>

      <!-- Profile Container -->
      <div
        id="profile-container"
        class="bg-gray-900 rounded-lg mx-4 mt-4 overflow-hidden"
      >
        <!-- Profile content will be dynamically loaded here -->
        <div class="text-center py-12">
          <div class="loading-spinner"></div>
          <div class="text-gray-400 mt-4">Loading profile...</div>
        </div>
      </div>

      <!-- Posts Container -->
      <div class="mx-4 mt-4 mb-8">
        <div id="posts-container" class="space-y-0">
          <!-- Posts will be dynamically loaded here -->
        </div>
      </div>
    </main>

    <!-- Simple Modal for Edit Profile -->
    <div
      id="edit-modal"
      class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden"
    >
      <div class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-gray-900 rounded-lg p-6 w-full max-w-md">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-xl font-bold">Edit Profile</h2>
            <button
              class="text-gray-400 hover:text-white"
              onclick="closeEditModal()"
            >
              <i class="fas fa-times"></i>
            </button>
          </div>

          <form id="edit-form" class="space-y-4">
            <div>
              <label class="block text-sm font-medium mb-2">Name</label>
              <input
                type="text"
                id="edit-name"
                class="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500"
                placeholder="Your name"
              />
            </div>

            <div>
              <label class="block text-sm font-medium mb-2">Bio</label>
              <textarea
                id="edit-bio"
                rows="3"
                class="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500 resize-none"
                placeholder="Tell us about yourself"
              ></textarea>
            </div>

            <div class="flex justify-end space-x-3 pt-4">
              <button
                type="button"
                onclick="closeEditModal()"
                class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors"
              >
                Cancel
              </button>
              <button
                type="submit"
                class="px-4 py-2 bg-blue-500 hover:bg-blue-600 rounded-lg transition-colors"
              >
                Save
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script>
      function closeEditModal() {
        document.getElementById("edit-modal").classList.add("hidden");
      }
    </script>
    <script type="module" src="/src/lib/header.ts"></script>
    <script type="module" src="/src/profile.ts"></script>
    <script type="module" src="/src//posts/handleLikes.ts"></script>
    <script type="module" src="/src/posts/handleDislike.ts"></script>
  </body>
</html>
